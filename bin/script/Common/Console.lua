---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by leyi.
--- DateTime: 2023/5/8 20:17
---
local Console = { }

Console.LogDebug = 1
Console.LogInfo = 2
Console.LogWarn = 3
Console.LogError = 4
Console.LogFatal = 5

local json = rapidjson
local console = ConsoleLog
Console.FormatLog = function(runInfo, ...)
    local ret = { }
    local val = { ... }
    local line = runInfo.currentline
    local name = string.match(runInfo.short_src, ".+/([^/]*%.%w+)$")
    table.insert(ret, string.format("%s:%d", name, line))

    for _, v in ipairs(val) do
        if type(v) == "table" then
            table.insert(ret, json.encode(v))
        else if type(v) == "string" then
            table.insert(ret, v)
        else
            table.insert(ret, tostring(v))
        end
        end
    end
    return table.concat(ret, " ")
end

function Console.Show(type, message)
    if os.debug then
        console.Show(type, message)
    end
end

function Console.Info(...)
    if os.debug then
        local runInfo = debug.getinfo(2)
        console.Show(Console.LogInfo, Console.FormatLog(runInfo, ...))
    end
end

function Console.Debug(...)
    if os.debug then
        local runInfo = debug.getinfo(2)
        console.Show(Console.LogDebug, Console.FormatLog(runInfo, ...))
    end
end

function Console.Warning(...)
    if os.debug then
        local runInfo = debug.getinfo(2)
        console.Show(Console.LogWarn, Console.FormatLog(runInfo, ...))
    end
end

function Console.Error(...)
    if os.debug then
        local runInfo = debug.getinfo(2)
        console.Show(Console.LogError, Console.FormatLog(runInfo, ...))
    end
end

function Console.Fatal(...)
    if os.debug then
        local runInfo = debug.getinfo(2)
        console.Output(Console.LogFatal, Console.FormatLog(runInfo, ...))
    end
end

return Console