<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GM后台工具</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<script>
    let xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://43.143.76.75/api/config/gm.json', true);
    xhr.onload = function() {
        if (this.status == 200) {
            let data = JSON.parse(this.responseText);
            processData(data);
        }
    };
    xhr.send();
    function processData(data) {
        let list = document.getElementById('myList');
        for (let i = 0; i < data.length; i++) {
            let item = data[i];
            let li = document.createElement('li');
            li.textContent = item.name;
            list.appendChild(li);
        }
    }
</script>

<body class="container mt-5">
<h1 class="text-center mb-4">GM列表</h1>
<ul class="list-group">

    <li class="list-group-item">
        <div class="row">
            <div class="col-2">
                <span>热更：</span>
            </div>
            <div class="col-8">
                <input type="text" class="form-control" id="input1">
            </div>
            <div class="col-2 text-right">
                <button type="button" class="btn btn-primary" onclick="submitInput('http://43.143.76.75/api/hotfix')">执行</button>
            </div>
        </div>
    </li>
    <li class="list-group-item">
        <div class="row">
            <div class="col-2">
                <span>重启：</span>
            </div>
            <div class="col-8">
                <input type="text" class="form-control" id="input2">
            </div>
            <div class="col-2 text-right">
                <button type="button" class="btn btn-primary" onclick="submitInput('http://www.example.com/upload2')">执行</button>
            </div>
        </div>
    </li>
    <!-- 可以添加更多的列表项 -->
</ul>

<script>
    function submitInput(url) {
        var inputElement = event.target.parentElement.parentElement.children[1].children[0]; // 获取输入框的DOM元素
        var inputValue = inputElement.value; // 获取输入框的值
        var xhr = new XMLHttpRequest(); // 创建XMLHttpRequest对象
        if (inputValue) { // 如果输入框不为空
            xhr.open("POST", url, true); // 设置请求方法、URL地址和是否异步
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); // 设置请求头部
            xhr.send("inputValue=" + inputValue); // 发送请求
            inputElement.value = ""; // 清空输入框
        }
        else{
            xhr.open("GET", url, true); // 设置请求方法、URL地址和是否异步
        }
    }
</script>

<script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
