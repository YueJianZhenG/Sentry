syntax = "proto3";
package s2s;
import "google/protobuf/any.proto";

message Listener
{
    string Name = 1;
    uint32 Port = 2;
}

message NodeInfo
{
    int32 AreaId = 1;   //区服id
    int32 NodeId = 2;   //节点id
    string ServerIp = 3;
    string ServerName = 4;  //服务器名字
    repeated string Services = 5;   //服务名列表
    map<string, int32> Listeners = 6; //所有监听器
}

message GroupConfigData
{
    uint32 GroupId = 1;     //组id
    int64 OpenTime = 2;     // 开启时间
    string Token = 3;       //验证token
    string GroupName = 4;
}

message NodeRegister
{
    message Request
    {
        NodeInfo nodeInfo = 1;
    }
    message Response
    {
        uint32 globalId = 1;
        GroupConfigData GroupData = 2;
    }
}



message NodeQuery
{
    message Request
    {
        int32 AreaId = 1;
        string Service = 2;
    }
    message Response
    {
        repeated NodeInfo NodeInfos = 1;
    }
}

message MysqlQuery
{
    message Request
    {
        google.protobuf.Any Data = 1;
    }
    message Response
    {
        string ErrotStr = 1;
        repeated google.protobuf.Any QueryDatas = 2;
    }
}

message MysqlOper
{
    message Request
    {
        google.protobuf.Any Data = 1;
    }
    message Response
    {
        string ErrorStr = 1;
    }
}
